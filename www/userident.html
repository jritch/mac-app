<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Age-CAP</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrapresponsive.min.css">
        <link rel="stylesheet" href="css/main.css">
        
        <script src="js/vendor/modernizr262respond110min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

<!-- ==========================================================================
   Navbar Code
   ========================================================================== -->

        <div class="navbar navbar-fixed-top">
          <div class="navbar-inner">

            <div class="container-fluid" id="header-container">
            
              <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <div id="back-btn"> <button class="btn btn-primary" onClick="history.go(-1);return true;">BACK</button> </div>
              <a id="page-title" class="brand" href="#">Location Details</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li><a href="index.html">Home <span class="icon-home"></span></a></li>                  
                  <li> <a id="font-button">Change Font Size  <span class="icon-font"></span></a></li>
                  <li> <a href="feedback.html" id="feedback-button">Give Feedback  <span class="icon-thumbs-up"></span></a></li>
                  <li> <a href="#myModal" data-toggle="modal">About Age-CAP</a></li>
                </ul>
              </div><!--/.nav-collapse -->

            </div>
          </div>
        </div>

<!-- ==========================================================================
   End Navbar Code
   ========================================================================== -->

    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span8 offset2 question_background" style="text-align:center">
                <h5>To aid us in tailoring Age-CAP to our users, please share a few details.</h5>
                <p>DISCLAIMER: IATSL will never share this personal information.</p>
            </div> 
        </div>

        <div class="spacer10"></div>  

    <div class="row-fluid">
    <div class="span8 offset2 question_background" style="text-align:center">
      <h5>Please choose the category that best describes you.</h5>
      <h5>I am...<h5>
    <div class="spacer5"></div>
    <div class="btn-toolbar pagination-centered">
    <div class="btn-group btn-group-vertical" data-toggle="buttons-radio">
      <button name="id_btns" id="q1" class="btn btn-large btn-primary test">A Senior</button> 
      <button name="id_btns" id="q2" class="btn btn-large btn-primary test">Providing care to a senior</button>
      <button name="id_btns" id="q3" class="btn btn-large btn-primary test">Working with a senior</button>
      <button name="id_btns" id="q4" class="btn btn-large btn-primary test">Responding for a senior</button>
      <button name="id_btns" id="q7" class="btn btn-large btn-primary test">Senior's family member</button>
      <button name="id_btns" id="q5" class="btn btn-large btn-primary test">Prefer not to say</button>
      <button name="id_btns" id="q6" class="btn btn-large btn-primary test">Other</button>
    </div>
    <div class="spacer5"></div>
    <div class="btn-toolbar pagination-centered">
      <button id="submit" class="btn btn-large btn-danger">Submit</button>
    </div>
    </div>

    </div>   

    </div> <!-- /container -->

<!-- ==========================================================================
  Modal Code
   ========================================================================== -->

        <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">  
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3 id="myModalLabel">About Age-CAP</h3>
          </div>
          <div class="modal-body">
            <p style=\'text-align:justify\'>Age-CAP is a smartphone application which aims to create a crowd-sourced database of age-friendly locations. It consists of survey styled forms which enable users to quickly rate a location. Users are also able to browse this database to assess the age-friendliness of locations in their neighborhood, providing them access to information which was otherwise unavailable. <br><br>Age-CAP was created by a multi-disciplinary team from the Toronto Rehabilitation Institute, University Health Network and University of Toronto.<br><br>Feedback or questions: iatsl@utoronto.ca</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
          </div>
        </div>
<!-- ==========================================================================
   End Modal Code
   ========================================================================== -->
       
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery191min.js"><\/script>')</script> <!--- failsafe to load up jQuery if the online copy is unavailable-->
        <script src="js/vendor/bootstrap.min.js"></script>
        
        <script src="js/main.js"></script>

        <script type="text/javascript">

          var isMobile = {
              Android: function() {
                  if (navigator.userAgent.match(/Android/i)){
                    return "Android";
                  }
              },
              BlackBerry: function() {
                  if (navigator.userAgent.match(/BlackBerry|BB10/i)){
                    return "BlackBerry";
                  }
              },
              iOS: function() {
                  if (navigator.userAgent.match(/iPhone|iPad|iPod/i)){
                    return "iOS";
                  }
              },
              Windows: function() {
                  if (navigator.userAgent.match(/IEMobile/i)){
                    return "Windows Phone";
                  }
              },

              any: function() {
                  mobile = (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
                  
                  if (mobile){
                    return mobile;
                  }

                  return "Desktop";

              }
          };

        $("#submit").click(function(){

          //this page stores a random unique id
          //each browser has its own userID, allowing us to associate ratings with users

          if (!localStorage.getItem("userID"))
          {
            //this function generates a pseudo-random id each time it is called
            UUID = function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3).replace(/[018]/g,b)};
            uuid = UUID();
            localStorage.setItem("userID", uuid);
          }

          else
          {
            uuid = localStorage.getItem("userID");
          }

          //then, we store the UUID and the information about the user in the database
          checked = $('.active').attr("id");
          if (!checked)
          {
            checked = "unset";
          }

          submission = {uuid:uuid, checked:checked, is_mobile:isMobile.any()};

          $.post('http://142.150.169.179/user_ident.php', submission, function(data){
            console.log(data)
            window.location.href = localStorage.getItem("trailingPage")
            // we send the gathered information to the database
            // then, we proceed to either rate or view a location
          });

         
        });
        </script>
        
    </body>
</html>
